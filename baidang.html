<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chicky.stu - Trang chủ</title> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body>
    <header class="py-4 text-center">
        <h1 class="text-danger">Website tìm trọ</h1>
        <hr />
    </header>

    <div class="container">
        <div class="w-75 mx-auto mb-5">
            <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active"><img
                            src="https://kientructrangkim.com/wp-content/uploads/2022/11/thiet-ke-noi-that-phong-tro-35.jpg"
                            class="d-block w-100" alt=""></div>
                    <div class="carousel-item"><img
                            src="https://bandon.vn/uploads/thiet-ke-nha-tro-dep-2020-bandon-28.jpg"
                            class="d-block w-100" alt=""></div>
                    <div class="carousel-item"><img
                            src="https://s-housing.vn/wp-content/uploads/2022/09/thiet-ke-phong-tro-dep-54.jpg"
                            class="d-block w-100" alt=""></div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample"
                    data-bs-slide="prev"><span class="carousel-control-prev-icon"></span><span
                        class="visually-hidden">Previous</span></button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExample"
                    data-bs-slide="next"><span class="carousel-control-next-icon"></span><span
                        class="visually-hidden">Next</span></button>
            </div>
        </div>

        <h3 class="mb-3">Tin nổi bật</h3>
        <div id="home-featured" class="row g-4 mb-5">
            <!-- JS sẽ chèn một vài card nổi bật từ posts -->
        </div>

        <h3 class="mb-3">Tìm nhanh</h3>
        <form id="quickSearchForm" class="row g-2 mb-4">
            <div class="col-md-4"><input id="qsPrice" class="form-control" placeholder="Giá tối đa (VNĐ)"></div>
            <div class="col-md-4"><input id="qsArea" class="form-control" placeholder="Diện tích tối thiểu (m²)"></div>
            <div class="col-md-4"><button id="qsBtn" class="btn btn-primary w-100">Tìm</button></div>
        </form>
    </div>

    <footer class="text-center py-4">
        <p>&copy; 2025 Chicky.stu</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js"></script>

    <script src="roomsStorage.js"></script>
    <script>
        // Hiển thị vài tin nổi bật ở trang chủ
        const featuredWrap = document.getElementById('home-featured');
        const posts = JSON.parse(localStorage.getItem('posts')) || [];
        (posts.slice(0, 3)).forEach((p, i) => {
            const col = document.createElement('div');
            col.className = 'col-md-4';
            col.innerHTML = `<div class="card"><img src="${p.images?.[0] || 'images/default.jpg'}" class="card-img-top" alt="${p.title}"><div class="card-body"><h5 class="card-title">${p.title}</h5><p class="card-text">${Number(p.price).toLocaleString('vi-VN')} VNĐ</p><a href="chitiet.html?id=${i}" class="btn btn-sm btn-primary">Xem chi tiết</a></div></div>`;
            featuredWrap.appendChild(col);
        });

        document.getElementById('qsBtn').addEventListener('click', (e) => {
            e.preventDefault();
            const price = Number(document.getElementById('qsPrice').value) || Infinity;
            const area = Number(document.getElementById('qsArea').value) || 0;
            const results = posts.filter(p => Number(p.price) <= price && Number(p.area) >= area);
            localStorage.setItem('searchResults', JSON.stringify(results));
            window.location.href = 'danhsach.html';
        });
    </script>
</body>

</html>